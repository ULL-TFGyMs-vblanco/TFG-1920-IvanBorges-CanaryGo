(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"003a":function(t,o,e){},"1ff9":function(t,o,e){"use strict";var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"login-box"},[e("a",{staticClass:"social-button",attrs:{href:"#",id:"facebook-connect"},on:{click:t.IniciarSesionFacebook}},[e("span",[t._v(t._s(t.facebook))])]),e("a",{staticClass:"social-button",attrs:{href:"#",id:"google-connect"},on:{click:t.IniciarSesionGoogle}},[e("span",[t._v(t._s(t.google))])])])},a=[],r=(e("7f7f"),e("28a5"),e("6762"),e("2fdb"),e("bc3a")),i=e.n(r),s=e("fc1b"),c={name:"LoginButtons",data:function(){return{google:this.$t("google"),facebook:this.$t("facebook")}},methods:{IniciarSesionGoogle:function(){var t=this,o=s["d"];s["b"].useDeviceLanguage(),o.setCustomParameters({login_hint:"user@example.com"});var e=!1;s["b"].signInWithPopup(o).catch((function(t){console.log(t),e=!0})).then((function(t){var o=t.credential.idToken;return o})).then((function(o){!0===e?t.Fail(t.$t("error_google")):i()({method:"put",url:"https://canarygo.herokuapp.com/autorizar",data:{tipo:"Login",tipo2:"OAuth",token:o,id_client:s["e"].client_id}}).then((function(o){if(console.log("RESPUESTA DEL SERVER",o),console.log("USUARIO GOOGLE",s["b"].currentUser),o.data.includes("Usuario correcto:")){var e=o.data.split(":")[1];t.DatosExtraUsuario(e,s["b"].currentUser.providerData[0]).then((function(o){var n;n=void 0===o.data.foto||""===o.data.foto?s["b"].currentUser.providerData[0].photoURL:o.data.foto;var a={name:o.data.name,date:o.data.date,gender:o.data.gender,photoURL:n,displayName:s["b"].currentUser.providerData[0].displayName,email:s["b"].currentUser.providerData[0].email,provider:s["b"].currentUser.providerData[0].providerId};t.$store.dispatch("store/anadirUsuario",a).then((function(){t.$store.dispatch("store/anadirToken",e).then((function(){setTimeout((function(){t.Success(),t.$router.push("events")}),500)}))}))})).catch((function(t){console.log(t)}))}else t.Fail(t.$t("error_google"))}),(function(t){console.log("EL ERROR ES",t)}))}))},IniciarSesionFacebook:function(){var t=this,o=s["c"];o.addScope("user_birthday"),s["b"].useDeviceLanguage(),o.setCustomParameters({login_hint:"user@example.com"});var e=!1;s["b"].signInWithPopup(o).catch((function(t){console.log(t),e=!0})).then((function(t){var o=t.credential.idToken;return o})).then((function(o){!0===e?t.Fail(t.$t("error_facebook")):i()({method:"put",url:"https://canarygo.herokuapp.com/autorizar",data:{tipo:"Login",tipo2:"OAuth",token:o,id_client:s["e"].client_id}}).then((function(o){var e;console.log("RESPUESTA DEL SERVER",o),console.log("USUARIO FACEBOOK",s["b"].currentUser),e=void 0===o.data.foto?s["b"].currentUser.providerData[0].photoURL:o.data.foto;var n={name:s["b"].currentUser.name,date:s["b"].currentUser.date,gender:s["b"].currentUser.gender,photoURL:e,displayName:s["b"].currentUser.providerData[0].displayName,email:s["b"].currentUser.providerData[0].email,provider:s["b"].currentUser.providerData[0].providerId};if(o.data.includes("Usuario correcto:")){var a=o.data.split(":")[1];t.$store.dispatch("store/anadirUsuario",n).then((function(){t.$store.dispatch("store/anadirToken",a).then((function(){setTimeout((function(){t.Success(),t.$router.push("events")}),500)}))}))}else t.Fail(t.$t("error_google"))}),(function(t){console.log("EL ERROR ES",t)}))}))},Success:function(){this.$q.notify({icon:"done",color:"positive",message:this.$t("login_sucess"),position:"bottom",timeout:1e3,progress:!0})},Fail:function(t){this.$q.notify({color:"negative",message:t,position:"bottom",timeout:2e3,progress:!0})},DatosExtraUsuario:function(t,o){return i()({method:"put",url:"https://canarygo.herokuapp.com/autorizar",data:{tipo:"Obtener Datos",token:t,correo:o.email}})}}},u=c,l=(e("98d2"),e("2877")),d=Object(l["a"])(u,n,a,!1,null,null,null);o["a"]=d.exports},"2b46":function(t,o,e){"use strict";var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"selector"},[e("picture-input",{key:t.$i18n.locale,ref:"foto",attrs:{id:"foto",crop:!1,width:this.anchura,height:this.altura,margin:"16",accept:"image/*",size:"5",radius:"5","button-class":"primary",zIndex:this.index,"custom-strings":{upload:this.$t("done"),drag:this.$t("select"),change:this.$t("change")}},on:{change:t.onChange,"":function(t){}}})],1)},a=[],r=e("e597"),i={name:"Selectorarchivos",data:function(){return{info1:this.$t("select"),index:1}},props:{anchura:{},altura:{}},components:{PictureInput:r["a"]},methods:{onChange:function(t){console.log("Nuevo archivo"),t?(console.log("Archivo le√≠do."),this.image=t):console.log("FileReader no soportado")}}},s=i,c=(e("3f53"),e("2877")),u=Object(c["a"])(s,n,a,!1,null,null,null);o["a"]=u.exports},"3f53":function(t,o,e){"use strict";var n=e("003a"),a=e.n(n);a.a},"5c50":function(t,o,e){},"98d2":function(t,o,e){"use strict";var n=e("5c50"),a=e.n(n);a.a},a7f7:function(t,o,e){t.exports=e.p+"img/Canary_Go_Icon.3e7ab0e6.png"}}]);