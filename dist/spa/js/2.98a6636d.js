(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{3932:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-card",{staticClass:"my-card"},[o("q-card-section",{staticClass:"fecha text-right"},[t._v(t._s(this.fecha_inicio)+" ")]),o("q-card-section",{attrs:{horizontal:""}},[o("q-img",{staticClass:"col-5",attrs:{id:"imagen",ratio:16/9,src:this.foto}},[o("q-inner-loading",{attrs:{showing:t.cargando}},[o("q-spinner",{attrs:{size:"50px",color:"grey-3"}})],1)],1),o("q-card-section",{attrs:{vertical:""}},[o("q-card-section",{attrs:{horizontal:""}},[o("div",{staticClass:"votos_",attrs:{id:"votos"}},[o("q-card-section",{staticClass:"votos"},[o("div",{staticClass:"votos_box"},[o("q-btn",{attrs:{color:this.color_negativo,disable:this.estado_disable,size:"70%",flat:"",round:"",icon:"thumb_down"},on:{click:function(e){return t.Operacion("Restar")}}}),o("q-btn",{staticClass:"votos_evento",staticStyle:{"pointer-events":"none"},attrs:{size:"110%",flat:"",loading:this.cargando}},[t._v(t._s(this.votos))]),o("q-btn",{attrs:{color:this.color_positivo,disable:this.estado_disable,size:"70%",flat:"",round:"",icon:"thumb_up"},on:{click:function(e){return t.Operacion("Sumar")}}})],1)])],1)]),o("q-card-section",{staticClass:"titulo text-justify",attrs:{id:"titulo"}},[t._v(t._s(this.nombre_evento)+"\n          "),o("q-inner-loading",{attrs:{showing:t.cargando}},[o("q-spinner-dots",{attrs:{size:"40px",color:"primary"}})],1)],1),o("q-card-section",{staticClass:"ubicacion text-justify"},[t._v(t._s(this.isla)+"\n          "),o("q-inner-loading",{attrs:{showing:t.cargando}},[o("q-spinner-dots",{attrs:{size:"30px",color:"primary"}})],1)],1),o("q-card-section",{staticClass:"precio text-justify"},[t._v(t._s(this.precio)+" â‚¬\n          "),o("q-inner-loading",{attrs:{showing:t.cargando}},[o("q-spinner-dots",{attrs:{size:"30px",color:"primary"}})],1)],1)],1)],1),o("br"),o("q-separator"),o("q-card-section",{staticClass:"titulo text-justify",attrs:{id:"descripcion"}},[t._v(t._s(t.$t("description"))+"\n      "),o("q-inner-loading",{attrs:{showing:t.cargando}},[o("q-spinner-bars",{attrs:{size:"25px",color:"primary"}})],1)],1),o("q-card-section",{staticClass:"descripcion text-justify descripcion_texto",attrs:{id:"descripcion_texto"}},[t._v(t._s(t.descripcion)+"\n\n    ")]),o("q-card-section",{staticClass:"titulo text-justify descuento"},[t._v(t._s(t.$t("price_discount"))+"\n      "),o("q-inner-loading",{attrs:{showing:t.cargando}},[o("q-spinner-bars",{attrs:{size:"25px",color:"primary"}})],1)],1),o("q-card-section",{directives:[{name:"show",rawName:"v-show",value:this.mostrar_codigo,expression:"this.mostrar_codigo"}],staticClass:"descripcion text-justify"},[t._v(t._s(t.$t("not_applicable"))+"\n    ")]),o("q-card-section",{directives:[{name:"show",rawName:"v-show",value:!this.mostrar_codigo,expression:"!this.mostrar_codigo"}],staticClass:"descripcion text-justify descuento_codigo"},[t._v(t._s(t.descuento))]),o("q-card-section",{staticClass:"titulo text-justify duracion"},[t._v(t._s(t.$t("duration"))+"\n      "),o("q-inner-loading",{attrs:{showing:t.cargando}},[o("q-spinner-bars",{attrs:{size:"25px",color:"primary"}})],1)],1),o("q-card-section",{staticClass:"descripcion text-justify fechas"},[t._v(t._s(t.fecha_inicio+" - "+t.fecha_fin)+"\n\n    ")]),o("q-separator"),o("br"),o("q-card-section",{staticClass:"titulo text-justify localizacion"},[t._v(t._s(t.$t("event_location")))]),o("MapaSimple",{key:t.$i18n.locale,attrs:{center:this.ubicacion,markerLatLng:this.ubicacion2}}),o("q-separator"),o("div",{staticClass:"opciones"},[o("q-card-actions",[o("div",{staticClass:"col-3 col-sm-3 text-center usuario"},[o("q-btn",{attrs:{size:"70%",flat:"",round:""}},[o("q-avatar",{attrs:{size:"200%"}},[o("img",{attrs:{src:this.foto_usuario}})]),o("q-btn",{attrs:{size:"70%",flat:""}},[t._v(t._s(this.usuario))])],1)],1),o("div",{staticClass:"col-3 col-sm-3 text-center maps"},[o("q-btn",{attrs:{id:"Maps",size:"70%",outline:"",color:"primary",icon:"navigation"},on:{click:t.EnviarMaps}},[t._v("MAPS")])],1),o("div",{staticClass:"col-3 col-sm-3 text-center comentarios"},[o("q-btn",{attrs:{size:"70%",flat:"",round:"",icon:"chat"}},[o("q-btn",{attrs:{size:"70%",flat:""}},[t._v(t._s(this.comentarios))])],1)],1),o("div",{staticClass:"col-3 col-sm-3 text-center evento"},[o("q-btn",{attrs:{id:"link",size:"70%",unelevated:"",disable:this.link_activo,rounded:"",color:"primary"},on:{click:t.RedirigirRegistro}},[t._v(t._s(t.$t("event_register")))])],1)])],1)],1),o("br"),o("q-card",{staticClass:"my-card"},[o("div",{staticClass:"color_comentarios text-center"},[o("q-item-section",[o("q-item-label",[o("q-icon",{staticStyle:{"font-size":"2em"},attrs:{name:"comment"}}),t._v("\n          "+t._s(t.$t("comments"))+"\n        ")],1)],1)],1),o("div",{staticClass:"q-pa-md row justify-center seccion_comentarios",attrs:{id:"seccion_comentarios"}},[o("div",[t._v("\n        "+t._s(t.$t("comment_post"))+"\n\n        "),o("div",{staticClass:"q-pa-md q-gutter-sm"},[o("EditorTexto",{key:t.$i18n.locale,attrs:{id:this.id},on:{clicked:t.onClickChild}})],1),o("q-chat-message",{directives:[{name:"show",rawName:"v-show",value:this.sin_comentarios,expression:"this.sin_comentarios"}],attrs:{label:t.$t("no_comments")}}),t._l(t.comentarios_texto,(function(e){return o("Comentario",t._b({key:e.nombre,staticClass:"comentarios"},"Comentario",e,!1))}))],2)])])],1)},s=[],a=(o("28a5"),o("b54a"),o("bc3a")),r=o.n(a),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"q-pa-md q-gutter-sm"},[o("q-editor",{ref:"inputval",attrs:{id:"editor","min-height":"6rem",definitions:{left:{tip:this.left_text},center:{tip:this.center_text},right:{tip:this.right_text},justify:{tip:this.justify_text},bold:{tip:this.bold_text},italic:{tip:this.italic_text},underline:{tip:this.underline_text},strike:{tip:this.strikethrough_text},emoji:{tip:this.emoji_text,icon:"mood",label:"Emojis",handler:t.CambiarEmoji},upload:{tip:this.upload_text,icon:"cloud_upload",label:this.upload_label,handler:t.PublicarComentario}},toolbar:[["left","center","right","justify"],["bold","italic","strike","underline"],["emoji","upload"]]},on:{click:t.ResetearCursor},model:{value:t.comentario,callback:function(e){t.comentario=e},expression:"comentario"}}),o("div",{attrs:{id:"caretPos"}}),o("picker",{directives:[{name:"show",rawName:"v-show",value:t.mostrar_emoji,expression:"mostrar_emoji"}],attrs:{set:"messenger",defaultSkin:3,title:this.title,emoji:"point_up",i18n:{search:this.search_results,notfound:this.notfound,categories:{search:this.search,recent:this.recent,people:this.people,nature:this.nature,foods:this.foods,activity:this.activity,places:this.places,objects:this.objects,symbols:this.symbols,flags:this.flags}}},on:{select:t.SeleccionarEmoji},model:{value:t.comentario,callback:function(e){t.comentario=e},expression:"comentario"}})],1)])},c=[],l=(o("f576"),o("6b54"),o("06db"),o("3b2b"),o("a481"),o("b047f")),d={name:"EditorTexto",components:{Picker:l["Picker"]},data:function(){return{comentario:"",upload_label:this.$t("upload_label"),upload_text:this.$t("comment_post"),bold_text:this.$t("bold"),italic_text:this.$t("italic"),underline_text:this.$t("underline"),strikethrough_text:this.$t("strikethrough"),left_text:this.$t("left"),center_text:this.$t("center"),right_text:this.$t("right"),justify_text:this.$t("justify"),emoji_text:this.$t("emoji_text"),mostrar_emoji:!1,title:this.$t("title"),search_results:this.$t("search"),notfound:this.$t("notfound"),search:this.$t("search_results"),recent:this.$t("recent"),people:this.$t("people"),nature:this.$t("nature"),foods:this.$t("foods"),activity:this.$t("activity"),places:this.$t("places"),objects:this.$t("objects"),symbols:this.$t("symbols"),flags:this.$t("flags"),cursor:0,cantidad_letras:0,cantidad_letras_extra:0,diferencia_letra:0,diferencia_cursor:0,calcularcurso:!0}},props:{id:{}},updated:function(){},mounted:function(){document.addEventListener("click",this.MostrarPosicion),document.addEventListener("keyup",this.MostrarPosicion)},beforeDestroy:function(){document.removeEventListener("click",this.MostrarPosicion),document.addEventListener("keyup",this.MostrarPosicion)},methods:{CambiarEmoji:function(){this.mostrar_emoji=!this.mostrar_emoji},ResetearCursor:function(){if(this.calcularcurso){var t=document.getElementById("editor");this.diferencia_cursor=this.ObtenerCursor(t),this.calcularcurso=!1}},html2text:function(t){t=t.replace(new RegExp("&nbsp;","g")," "),t=t.replace(new RegExp("<div>","g"),"\n"),t=t.replace(new RegExp("</div>","g"),""),t=t.replace(new RegExp("<div/>","g"),"\n"),t=t.replace(new RegExp("<br>","g"),"\n");var e=0,o=!1,i=0,s=this.cursor;while(i<s)" "===t[i]?e+=1:"<"===t[i]||">"===t[i]?(s++,o=!o):o&&s++,i+=1;return this.cursor+=6*e,this.cantidad_letras=t.length,t},text2HTML:function(t){t=t.replace(new RegExp(" ","g"),"&nbsp;"),t=t.replace(/\n/g,"<div/>");var e=0,o=!1,i=0,s=0;while(this.cursor>s)"<"===t[e]?(o=!0,i+=1):">"===t[e]?(o=!1,i+=1):o?i+=1:" "===t[e]||(s+=1,i+=1),e+=1;return this.cantidad_letras_extra=t.length,this.diferencia_letra=i-this.cursor,this.diferencia_letra>0&&(this.cursor+=this.diferencia_letra),t},ObtenerCursor:function(t){var e,o=0,i=t.ownerDocument||t.document,s=i.defaultView||i.parentWindow;if("undefined"!==typeof s.getSelection){if(e=s.getSelection(),e.rangeCount>0){var a=s.getSelection().getRangeAt(0),r=a.cloneRange();r.selectNodeContents(t),r.setEnd(a.endContainer,a.endOffset),o=r.toString().length}}else if((e=i.selection)&&"Control"!==e.type){var n=e.createRange(),c=i.body.createTextRange();c.moveToElementText(t),c.setEndPoint("EndToEnd",n),o=c.text.length}return o-this.diferencia_cursor},MostrarPosicion:function(){var t=document.getElementById("editor");this.cursor=this.ObtenerCursor(t)},SeleccionarEmoji:function(t){this.comentario=this.html2text(this.comentario),this.comentario=this.text2HTML(this.comentario);var e=this.cursor,o=this.comentario.substr(0,e),i=this.comentario.substring(e,this.comentario.length),s=o+t.native+i;this.comentario=s},PublicarComentario:function(){var t=this;""!==this.comentario&&r()({method:"put",url:"https://canarygo.herokuapp.com/eventos",data:{tipo:"Comentario",nombre:this.$store.state.store.datosUsuario.displayName,avatar:this.$store.state.store.datosUsuario.photoURL,hora:(new Date).getHours()+":"+String((new Date).getMinutes()).padStart(2,"0"),dia:(new Date).getDate()+"/"+((new Date).getMonth()+1)+"/"+(new Date).getFullYear(),texto:this.comentario,id:this.id,token:this.$store.state.store.token}}).then((function(e){t.$q.notify({message:t.$t("comment_success"),color:"green-5",textColor:"white",icon:"cloud_done"}),t.comentario="",t.$emit("clicked")})).catch((function(t){console.log("EL ERROR ES",t),this.$q.notify({message:this.$t("comment_error"),color:"red",textColor:"white",icon:"error"})}))}}},h=d,u=o("2877"),m=o("d66b"),p=o("eebe"),_=o.n(p),f=Object(u["a"])(h,n,c,!1,null,null,null),v=f.exports;_()(f,"components",{QEditor:m["a"]});var g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-chat-message",{staticClass:"comentario",attrs:{name:this.nombre,avatar:this.avatar,text:[this.texto],stamp:this.fecha,"text-color":"black","bg-color":"grey-4",sent:this.tipo_mensaje}})],1)},b=[],x={name:"Comentario",data:function(){return{tipo_mensaje:!1,fecha:this.dia+" "+this.hora}},props:{nombre:{},avatar:{},texto:{},hora:{},dia:{}},mounted:function(){this.$store.state.store.datosUsuario.displayName===this.nombre&&(this.tipo_mensaje=!0)}},y=x,C=o("8169"),k=Object(u["a"])(y,g,b,!1,null,null,null),q=k.exports;_()(k,"components",{QChatMessage:C["a"]});var $=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("l-map",{staticStyle:{height:"350px"},attrs:{id:"mapa",cursor:"enable",zoom:t.zoom,center:t.center}},[o("l-control-layers",{attrs:{position:"topright"}}),t._l(t.tileProviders,(function(t){return o("l-tile-layer",{key:t.name,attrs:{name:t.name,visible:t.visible,url:t.url,attribution:t.attribution,zoomAnimation:"true","layer-type":"base"}})})),o("l-marker",{attrs:{id:"marker","lat-lng":t.markerLatLng}},[o("l-popup",{attrs:{id:"popup_marker"}},[t._v(t._s(t.center))])],1)],2),o("br"),o("link",{attrs:{rel:"stylesheet",href:"https://unpkg.com/leaflet-geosearch@2.6.0/assets/css/leaflet.css"}})],1)},w=[],j=o("2699"),E=o("a40a"),z=o("9ee8"),S=o("4e2b"),M=o("f60f"),R=(o("5aec"),o("6cc5"),o("e11e")),L=o.n(R),O=o("c6e0");delete R["Icon"].Default.prototype._getIconUrl,R["Icon"].Default.mergeOptions({iconRetinaUrl:o("584d"),iconUrl:o("6397"),shadowUrl:o("e2b9")});var Q={name:"MapaSimple",components:{LMap:j["a"],LTileLayer:E["a"],LControlLayers:z["a"],LMarker:S["a"],LPopup:M["a"]},data:function(){return{index:1,marker:!0,geosearchOptions:{provider:new O["OpenStreetMapProvider"]},url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoom:14,markerinfo:"Evento",tileProviders:[{name:this.$t("map0"),visible:!0,attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},{name:this.$t("map1"),visible:!1,url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}]}},props:{center:{},markerLatLng:{}},mounted:function(){document.getElementsByClassName("leaflet-control-zoom-in")[0].setAttribute("title",this.$t("zoom_in")),document.getElementsByClassName("leaflet-control-zoom-out")[0].setAttribute("title",this.$t("zoom_out"))}},P=Q,D=Object(u["a"])(P,$,w,!1,null,null,null),T=D.exports,U={name:"Descripcionevento",components:{EditorTexto:v,Comentario:q,MapaSimple:T},data:function(){return{comentarios_texto:[],sin_comentarios:!1,comentarios:"",foto:"",nombre_evento:"",localizacion:"",precio:"",fecha_inicio:"",fecha_fin:"",votos:"",usuario:"",foto_usuario:"",isla:"",id:"",navegador:"",descripcion:"",descuento:"",link:"",link_activo:!0,mostrar_codigo:!1,votantes:[],cargando:!0,votar:!1,color_positivo:"",color_negativo:"",estado_disable:!1,votos_evento:this.votos,ubicacion:[0,0],ubicacion2:[28.46824,-16.25462],x:0,y:0}},mounted:function(){this.Mostrar()},methods:{CambiarEmoji:function(){this.mostrar_emoji=!this.mostrar_emoji},CopiarEmoji:function(t){this.editor=t},Operacion:function(t){r()({method:"post",url:"https://canarygo.herokuapp.com/eventos",data:{operacion:t,email:this.$store.state.store.datosUsuario.email,id:this.id,token:this.$store.state.store.token}}).then((function(t){})).catch((function(t){console.log("EL ERROR ES",t)})),"Sumar"===t?(this.estado_disable=!0,this.color_positivo="blue",this.votos+=1):(this.estado_disable=!0,this.color_negativo="red",this.votos-=1)},Mostrar:function(){var t=this;r()({method:"put",url:"https://canarygo.herokuapp.com/eventos",data:{tipo:"Buscar",navegador:this.$route.params.id,tipo_busqueda:"navegador",token:String(this.$store.state.store.token)}}).then((function(e){var o=e.data[0];void 0!==o.nombre_evento?(t.foto=o.foto,t.nombre_evento=o.nombre_evento,t.localizacion=o.localizacion,t.precio=o.precio,t.fecha_inicio=o.fecha_inicio,t.votos=o.votos,t.comentarios=o.comentarios,t.usuario=o.usuario,t.isla=o.isla,t.id=o.id,t.foto_usuario=o.foto_usuario,t.navegador=o.navegador,t.comentarios_texto=o.comentarios_texto,t.votantes=o.votantes,t.descripcion=o.descripcion,t.fecha_fin=o.fecha_fin,t.descuento=o.descuento,t.link=o.link,""===o.descuento&&(t.mostrar_codigo=!0),0===o.comentarios?t.sin_comentarios=!0:t.sin_comentarios=!1,""!==o.link&&(t.link_activo=!1),t.ComprobarVotos(),t.CargarMapa(),t.cargando=!1):(t.$store.dispatch("store/borrarUsuario"),t.saludo="",t.img="",t.$router.push("login"))})).catch((function(t){console.log("EL ERROR ES",t)}))},ComprobarVotos:function(){for(var t,e=0;e<this.votantes.length;e++)this.votantes[e].email===this.$store.state.store.datosUsuario.email&&(this.votar=!0,t=this.votantes[e].tipo,e=this.votantes.length);this.votar&&(1===t?(this.estado_disable=!0,this.color_positivo="blue"):(this.estado_disable=!0,this.color_negativo="red"))},CargarMapa:function(){this.x=1*this.localizacion.split(",")[0],this.y=1*this.localizacion.split(",")[1],this.ubicacion=[this.x,this.y],this.ubicacion2=L.a.latLng(this.x,this.y)},RedirigirRegistro:function(){window.open(this.link)},EnviarMaps:function(){window.open("https://www.google.es/maps/search/"+this.x+","+this.y)},onClickChild:function(){this.Mostrar()}}},I=U,N=(o("6094"),o("f09f")),A=o("a370"),B=o("068f"),H=o("74f7"),V=o("0d59"),J=o("9c40"),Y=o("8380"),F=o("eb85"),W=o("a154"),G=o("4b7e"),K=o("cb32"),X=o("4074"),Z=o("0170"),tt=o("0016"),et=Object(u["a"])(I,i,s,!1,null,null,null);e["default"]=et.exports;_()(et,"components",{QCard:N["a"],QCardSection:A["a"],QImg:B["a"],QInnerLoading:H["a"],QSpinner:V["a"],QBtn:J["a"],QSpinnerDots:Y["a"],QSeparator:F["a"],QSpinnerBars:W["a"],QCardActions:G["a"],QAvatar:K["a"],QItemSection:X["a"],QItemLabel:Z["a"],QIcon:tt["a"],QChatMessage:C["a"]})},"3f32":function(t,e,o){},6094:function(t,e,o){"use strict";var i=o("3f32"),s=o.n(i);s.a}}]);